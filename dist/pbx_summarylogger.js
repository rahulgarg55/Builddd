var fs=require("fs"),dt=require("./common/datetime"),callevent=function(o){var r,i="",a=null;return callevent.prototype.write=function(e,t){var n,l;(n=(new dt).getDateString())!=i&&(r=o+"_"+n+".txt",console.log("Debug: Changing to new CDR File(%s)",r),a&&a.close(),a=null,a=fs.createWriteStream(r,{flags:"a",defaultEncoding:"utf8",fd:null,mode:438,autoClose:!0}),i=n),a?(l=(new dt).getDateTimeString(),fs.readFile(r,"utf8",function(e,t){if(e)return console.log(e);e=t.replace(/string to be replaced/g,"replacement");fs.writeFile(someFile,e,"utf8",function(e){if(e)return console.log(e)})}),a.write(e+"#"+l+"#"+t+"\n")):console.log("ERROR: Writestream is null, Could not write CDRs"+l+"#"+t)},this};module.exports=callevent;