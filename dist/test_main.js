const util=require("util"),fs=require("fs"),http=require("https"),ari=require("ari-client"),sox=require("sox-stream"),downloadFile=(e,r,o)=>{const s=fs.createWriteStream(r);http.get(e,e=>{e.pipe(s),s.on("finish",()=>{s.close(o)})})},asteriskConfig={url:"http://100.65.151.102:8088/ari",username:"asterisk",password:"asterisk"};ari.connect(asteriskConfig.url,asteriskConfig.username,asteriskConfig.password,(e,t)=>{if(e)console.error("Error connecting to ARI:",e);else{const i={lang:"en",offsetms:0,skipms:0};const n="/tmp/downloadedWavFile.wav",a="/tmp/convertedWavFile.wav";downloadFile("https://dev-kommuno.s3.ap-south-1.amazonaws.com/testoo.wav",n,e=>{if(e)console.error("Error downloading WAV file:",e);else{var e=fs.createReadStream(n),r=sox({output:{bits:16,rate:8e3,channels:1,type:"wav"}}),o=fs.createWriteStream(a);e.pipe(r).pipe(o),console.log("WAV file converted successfully.");const s=t.Playback();s.play({media:"sound:"+a},i,e=>{e?console.error("Error playing WAV file:",e):(console.log("WAV file playback started."),s.once("PlaybackFinished",()=>{fs.unlink(n,e=>{e&&console.error("Error deleting downloaded WAV file:",e),fs.unlink(a,e=>{e&&console.error("Error deleting converted WAV file:",e)})})}))}),r.on("error",e=>{console.error("Error converting WAV file:",e)})}})}});