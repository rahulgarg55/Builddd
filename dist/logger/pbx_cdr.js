var fs=require("fs"),dt=require("./common/datetime"),cfg=require("../../pbx_config"),gwriteStream=null,logger=function(){var r="";return logger.prototype.init=function(e,o,l){var g,t;console.log("level: ",cfg.log.level),console.log("file_size: ",cfg.log.file_size),console.log("write_to_console_flag: ",cfg.log.write_to_console_flag),console.log("general_log_path: ",cfg.log.general_log_path),console.log("general_log_file: ",cfg.log.general_log_file),console.log("summary_log_path: ",cfg.log.summary_log_path),console.log("summary_log_file: ",cfg.log.summary_log_file),console.log("cdr_log_path: ",cfg.log.cdr_log_path),console.log("cdr_log_file: ",cfg.log.cdr_log_file),(t=(new dt).getDateString())!=r&&(g=cfg.log.general_log_path+cfg.log.general_log_file+"_"+t+".txt",console.log("Logger File(%s)",g),gwriteStream&&gwriteStream.close(),gwriteStream=null,gwriteStream=fs.createWriteStream(g,{flags:"a",defaultEncoding:"utf8",fd:null,mode:438,autoClose:!0}),r=t)},logger.prototype.log=function(e,o,l,g){var t;gwriteStream?(t=(new dt).getDateTimeString(),gwriteStream.write("["+e+"] ["+t+"] ["+o+"] ["+l+"] ["+g+"]\n"),"1"===cfg.log.write_to_console_flag&&console.log("["+e+"] ["+t+"] ["+o+"] ["+l+"] ["+g+"]")):console.log("ERROR: Writestream is null, Could not write logss"+t+"#"+g)},this};module.exports=logger;