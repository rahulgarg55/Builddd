var pbx_logger=require("../logger/pbx_logger.js"),logger=new pbx_logger;function StateMachine(){var a={},t=null;this.add_transition=function(e,t,n){a.hasOwnProperty(e.state_name)||(a[e.state_name]={}),a[e.state_name][t]=n},this.change_state=function(e){logger.log("IMP",0,"state_machine","Event: "+e+" Received in State: "+t.state_name),null!=(t=a[t.state_name][e])?(t.enter(),logger.log("IMP",0,"state_machine","Event "+e+" handled in current state: "+t.state_name)):(logger.log("ERR",0,"state_machine","Event "+e+" Not handled in current state"),logger.log("ERR",0,"state_machine","lets add transitions as hangup."),(t=a.hangup.hangup).enter())},this.start=function(e){(t=e).enter()},this.getCurrentStateName=function(){return t.state_name}}module.exports=StateMachine;