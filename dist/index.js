"use strict";var ari=require("ari-client"),util=require("util");const http=require("http");var cfg=require("../../pbx_config");const dialednum="+917528912892";function clientLoaded(e,n){console.log("Client Loaded"),n.on("StasisStart",function(e,t){console.log("ON Event [stasisStart]"),console.log("channel state ",t.state),console.log("Caller number ",t.caller.number),console.log("channel currunt state ",t.currentState);var o=n.Channel();console.log("channel id ",t.id),console.log("channel details:",o.id),console.log("Outgoing channel has entered Stasis."),o.originate({endpoint:"SIP/+918591118695@10.2.9.5:5060",app:"cloud_pbx_dev_type_script",appArgs:"dialed,+917528912892",callerId:"ed_kommuno <+911724755025>"},function(e){e?console.error("Error initiating outgoing call: "+e):(console.log("Outgoing call initiated."),console.log("outgoing call id :",o.id))})}),n.on("StasisEnd",function(e,t){console.log("ON Event [stasisEnd]")}),n.start(cfg.asterisk.stasisApp)}var asteriskAddress="http://"+cfg.asterisk.ip+":"+cfg.asterisk.port;console.log(""+asteriskAddress),ari.connect(asteriskAddress,cfg.asterisk.user,cfg.asterisk.password,clientLoaded),console.log("DEB",0,"main","Asterisk Initiated.......");